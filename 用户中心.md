# 用户中心

## 第一节：上

### 企业做项目流程 

需求分析 => 设计（概要设计、详细设计）=> 技术选型 => 初始化 / 引入需要的技术 => 写 Demo => 写代码（实现业务逻辑） => 测试（单元测试）=> 代码提交 / 代码评审 => 部署=> 发布

### 需求分析 

1. 登录 / 注册 
2. 用户管理（仅管理员可见）对用户的查询或者修改 
3. 用户校验（ 仅星球用户 ）

### 前端初始化

#### 步骤

1. 初始化Ant Design Pro脚手架 -- [开箱即用的中台前端/设计解决方案 - Ant Design Pro](https://pro.ant.design/zh-CN/)  

   ``` 终端
   npm i @ant-design/pro-cli -g
   pro create 文件名   --选umi@3＆simple
   yarn
   yarn add @umijs/preset-ui -D  -- 按照umiui
   ```

2. 项目瘦身  【删页面文件的同时记得路由也要删掉】

#### 一些bug

1. yarn create umi userCenter❌
   ![image-20230903231340605](E:\Project\YpProject\userCenter\用户中心.assets\image-20230903231340605.png)

   
   
   pro create user-center-frontend✔
   ![image-20230903231257411](E:\Project\YpProject\userCenter\用户中心.assets\image-20230903231257411.png)

### 后端初始化

#### 步骤

1. IDEA新建项目，选择Spring Initializr【记得修改jdk和java的版本】   -->   选择依赖，常见的有 `①Lombok   ②SpringBootDevTools   ③SpringConfigurationProcessor   ④mysqlDriver   ⑤springweb  ⑥junit  ⑦mybatisFramework    `

2. 连接数据库【顺便建个表放点数据进去】
3. 修改`application.yml`配置
4. 引入`mybatisbplus`依赖： pom.xml【记得刷新】
5. 添加mapper、model相关文件代码【看mybatisplus文档示例】
6. SpringBoot的启动类`Application.java`添加 @MapperScan注解
7. 添加测试类test一下

#### 导包相关操作

1. `http://mvnrepository.com/`这里面找
2. 选择风险点少的，人数多的
3. 复制依赖进pom.xml刷新就行

#### 一些bug

1. 注意springboot的初始化版本：**如果版本错了单单改不行，要重建**——[Springboot配置时出现的错误——类文件具有错误的版本61.0，应为52.0_抓到一只猪的博客-CSDN博客](https://blog.csdn.net/m0_64473560/article/details/131215114?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-2-131215114-blog-128366932.235^v38^pc_relevant_anti_vip_base&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-2-131215114-blog-128366932.235^v38^pc_relevant_anti_vip_base&utm_relevant_index=1)

2. 后端测试相关注解：

​				如果@Test导入的是org.junit.jupiter.api.Test，则不要加@RunWith

​				如果导入的是org.junit.Test，则需配合 @RunWith(SpringRunner.class) 才可完成单元测试

<img src="E:\Project\YpProject\userCenter\用户中心.assets\image-20230904133423670.png" alt="image-20230904133423670" style="zoom:67%;" />



## 第二节：中

### 后端步骤

1. 设计表
2. 规整项目目录 com.yupi.usercenter-- controller、service、mapper、model、utils
3. 自动生成器 
   1. 右键model类/表，选择MybatisX-Generator，再点击一些配置
   2. 会生成domain、mapper、service，生成的代码会在gengerator文件夹里面，移进相应的包里面就行
      ![img](E:\Project\YpProject\userCenter\用户中心.assets\1647161384855-8dcd5b67-1d02-47d4-980c-259b542573a2.png)
4. 写测试类
   1. 创建测试：把光标放在Uservice上，按下alt+enter，选择创建测试，会多一个UserSeriveTes
   2. 编写数据：创建好了User类，放在user上，alt+enter选择Genterate all setter with default value就会调用该对象所有的set方法，并指定默认值，注意把id的set删掉，应为本来就有默认值
   3. 增加断言：`Assertions.assertEquals(true, save);` (当你输入一个方法或函数的名称,并输入左括号时,按下ctrl+p，就会显示该方法或函数所接受的参数信息
5. 注册逻辑
   1. 对用户的账号、密码进行校验：账号不包含特殊字符、密码和校验密码相同 【 apache common utils一个很好用的库，比如说判断字符串是否为空`StringUtills.isAnyBlank(s1,s2...)`
   2. 对密码进行MD5加密，再存进数据库
   3. 直接把鼠标放在userRegister上alt+enter，选择生成缺少的测试方式

## 第三节：下

## 后端步骤



## 操作tips：

1. 写完service的函数后，在函数上面直接/**＋回车就可以快速生成注释
   ![image-20230908095808763](E:\Project\YpProject\userCenter\用户中心.assets\image-20230908095808763.png)

2. private static final  可以先输入prsf，按下enter快速生成
3. 在service多写了参数之后，点击左侧的R可以快速在serviceimpl中添加这个参数
   ![image-20230908100947192](E:\Project\YpProject\userCenter\用户中心.assets\image-20230908100947192.png)
4. mybatisplus可以默认帮助我们查询出来没有被删的用户：application配置+@TableLogic配置。[逻辑删除 | MyBatis-Plus (baomidou.com)](https://baomidou.com/pages/6b03c5/#使用方法)
5. 写控制器函数快速填参：插件Auto filling Java call arguments，鼠标放在括号中间alt+enter
   ![image-20230908103046197](E:\Project\YpProject\userCenter\用户中心.assets\image-20230908103046197.png)
6. `@Data`注解作用：简化一般实体类的get, set, toString，construct（构造函数）等的书写，简洁化代码。@Data≈@Getter + @Setter + toString() + equals等方法

## 没解决的问题

1. umi没有数据怎么回事
   <img src="E:\Project\YpProject\userCenter\用户中心.assets\image-20230903232604121.png" alt="image-20230903232604121" style="zoom:50%;" />

2. idea文件夹只有md文件，同时项目结构的模块没有内容，添加整个项目文件为模块不成功
   <img src="E:\Project\YpProject\userCenter\用户中心.assets\image-20230904122212508-16938013373501.png" alt="image-20230904122212508" style="zoom:67%;" />
   
   将【项目】改为【项目文件】就会显示
   <img src="E:\Project\YpProject\userCenter\用户中心.assets\image-20230904122249281-16938013713362.png" alt="image-20230904122249281" style="zoom: 67%;" />

   在项目结构的模块只添加后端文佳加为模块，成功，【项目】也显示
   <img src="E:\Project\YpProject\userCenter\用户中心.assets\image-20230904133205100-16938055287873.png" alt="image-20230904133205100" style="zoom:67%;" />